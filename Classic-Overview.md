

# Standard Library

The classic library can be used with both _sccz80_ and _zsdcc_ and the final binary can be made of object files generated by either compiler (subject to a few
requirements).

## Generic console (vt52)

The [generic console](Classic-GenericConsole) console driver provides a uniform set of escape codes to control text positioning, attributes etc. It is integrated into `<stdio.h>` and if not enabled as the default can be selected with the command line `--generic-console`.


## Floating Point Maths

Two generic maths libraries are available with the classic library [_genmath_](https://github.com/z88dk/z88dk/tree/master/libsrc/math/genmath) and [_math48_](https://github.com/z88dk/z88dk/tree/master/libsrc/_DEVELOPMENT/math/float). 

Both libraries perform roughly identically and have the same amount of precision (40 bit mantissa, 7 bit exponent), however the register usage of the libraries is different. _genmath_ uses the `ix` register and in particular the undocumented opcodes that use `ixl` and `ixh`. As a result, it cannot be used on either
Rabbit or Z180 processors. _math48_ on the otherhand makes extensive use of the alternate register set.

The ZX Spectrum, ZX81, CPC and z88 platforms additionally provide a maths library that utilises the floating point calculator within their ROMs. These provide
a lower degree of precision (a 32 bit mantissa), the trade-off being that they use less of your application memory.

**SDCC compatibility:** Only `-lmath48` is supported for _zsdcc_ compilations.


## Regular Expressions

Simplified [regex](https://github.com/z88dk/z88dk/tree/master/include/regex.h) support is supplied for all platforms.

## Memory Allocation

The classic library provides several memory allocators, the easiest way to get started is to use the _auto malloc_ feature of the library. 
In this mode the crt automatically sets aside a set amount memory between the end of the program and (usually) the stack pointer 
for the heap. There are a number of presets available: `-DAMALLOC` will reserve 75% of the free memory, `-DAMALLOC2` will reserve
50% of the free memory and `-DAMALLOC1` will reserve 25%. 

The classic library additionally provides [named heap](Classic-allocation) and [block](Classic-allocation) allocators.


# Sound Libraries

The classic library supports both a 1 bit [`<sound.h>`](Classic-1-bit-sound) and a PSG [`<psg.h>`](Classic---PSG-Library) based sound interface. 

The 1 bit library defines a collection of sound effects in addition to a tone generator.

# Input Library

Hardware keyboard scanning bypasses the target's ROM and directly polls the keyboard. The keyboard routines `in_LookupKey` and `in_Keypressed` handle multiple keys being pressed concurrently and as such are ideal for portable games programming. The various routines are defined in [`<input.h>`](Classic---Input-library)

On ports where it is available, you can switch stdin to non-firmware reading routines using the option `-pragma-redirect:fgetc_cons=fgetc_cons_stdin`

## Joystick support

Targets generally support at least some form of joystick support. Polling of the joystick is exposed using the `joystick()` function in `<games.h>`

There are the following effective levels of support:

* Two keyboard joysticks using ROM functions: Only a single direction can be registered at once
* Multiple keyboard joysticks using inkey driver: Multiple directions supported
* Hardware joystick support: Multiple directions supported

# Debug Library

# Graphics Libraries

## Mono Graphics

A variety of drawing primitives and higher level functions are supplied by [`<graphics.h>`](Classic-Monochrome-Graphics). 

## Mono Sprites

Software driven [mono sprites](monosprites.md) are available on all platforms with graphics. Some platforms, for example the ZX Spectrum, have
more optimised sprite libraries available offering additional features.

## X11 emulation

This is an experimental library to emulate some basic behaviour fo the Xlib functions.
It isn't based on the network layer as the original library, and it implements only a tiny subset of the original functions but, being based on the "monochrome graphics" library, it is faily portable to many of the supported targets.

## lib3d

The [3D Libraries](lib3d) include a standard set of functions for making your own 3D functions. This document is a reference for these functions.

## VDP Support

## SP1 Sprite Library

The ZX Spectrum and clones support the [sp1](sp1) sprite library that provides advanced features ideal for writing performant games.

# Interrupt Handling

The Classic library provides functionality to implement general purpose [interrupts](interrupts) without having to drop down to machine code.

## Preemptive multitasking

A simple preemptive multitasking driver is available in `[<threading/preempt.h>` this allows multiple tasks to concurrently execute (for example
a game simulation and the user interaction) without the need to implement coroutines.


# Serial (RS232)



# Abstract Data Types (adt)

The library provides ready-to-use [abstract data types](Classic-adt) that implement common data structures in an optimal manner.

# Algorithm


# Emulation Libraries

The classic library provides both [MS-DOS](Classic-conio) emulation and Turbo C BGI Emulation to assist the porting of software.